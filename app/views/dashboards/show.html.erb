<%= render PageHeadingComponent.new(title: 'Dashboard') %>

<div class="max-w-7xl mt-4 mx-auto px-4 sm:px-6 md:px-8">
  <%= render(CardComponent.new(title: 'Priority Doctrine Fittings', body_class_names: '')) do |c| %>
    <% c.body do %>
      <%= render(TableComponent.new) do |t| %>
        <% t.header width: '1/3' do %>Name<% end %>
        <% t.header width: '1/3' do %>Ship<% end %>
        <% t.header width: '1/6' do %>On Contract<% end %>
        <% t.header width: '1/6' do %><%= current_alliance.main_market_name %><% end %>
        <% t.header width: '1/6' do %><%= current_alliance.appraisal_market_name %><% end %>

        <% @fittings.each do |fitting| %>
          <% t.row do |tr| %>
            <% tr.cell do %><%= link_to fitting.name, fitting_path(fitting), class: 'text-xs text-indigo-600 hover:text-indigo-900' %><% end %>
            <% tr.cell do %><%= fitting.type.name %><% end %>
            <% tr.cell do %><%= fitting.contracts_on_hand.count %><% end %>
            <% tr.cell do %>
              <% if fitting.main_market %>
                <%= fitting.market_on_hand(fitting.main_market) %>
              <% end %>
            <% end %>
            <% tr.cell do %>
              <% if fitting.appraisal_market %>
                <%= fitting.market_on_hand(fitting.appraisal_market) %>
              <% end %>
            <% end %>
          <% end %>
        <% end %>
      <% end %>
    <% end %>
  <% end %>
</div>
